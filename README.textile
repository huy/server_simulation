h1. Server simulation

h2. Overview 

This is simple Monte Carlo simulation of the behaviour of multi servers 
behind dump round robin loadbalancer.

In the model, requests are divided into different types according to a type of resource they access
.There is limited output capacity for each type of resource, which is distributed equaly to all servers. 

Requests come to the loadbalancer randomly at specific rate. The loadbalancer elect one of server to
forward the request regardless of type of resource required to complete the request.

A request take a time to complete during this short period it occupies the resource if all resources of
the servers are occupied then next incomming request has to wait until one resource of these resources become available.

The objective is to calculate total wait time of requests as well as % of requests that has to wait for resource' availability.

h2. Stochastic process 

The generator of the simulation will generate a request as tuple of (request_type,inter_arrival_time,service_time)
satisfying the following constraints

* requests arrive at the system with length of inter-arrival time as random number 
distributed according http://en.wikipedia.org/wiki/Exponential_distribution
* service time of each request (per request type) is a random number distributed 
according http://en.wikipedia.org/wiki/Normal_distribution
 
h2. Model's parameters
 
**request_type_distribution**

An array of probability for each type of requests, sum must yield 1.0. 

e.g. [0.5,0.5] decribes two types of requests, each has probability of 50%.

**request_type_mean_time**

An array of mean time (expected value i.e. most of requests takes this time to complete) 
for each type of requests, must have same length as request_type_distribution.

e.g. [2.5,0.75] describes the average service time of first type of requests is 2.5 second
and of second type is 750 ms.

**std_service_time_variance**

This decribe a degree the service time spreads from mean time, it is fixed to 1.0

**arrival_rate**

Expected number of requests per second.

e.g. 30 means 30 requests per second

h2. Requirements

* python version >= 2.4 
* numpy and scipy python libaries

h2. Example

python simulation.py sample1.yml

where sample1.yml is file of parameters for simulation

    number_of_servers: 6
    number_request_per_sec: 30
    number_of_requests: 50000
    types_of_requests:
      dma:
        output_capacity: 20
        proportion: 0.05 
        avg_service_time_secs: 4.5
      other:
        output_capacity: 60
        proportion: 0.95 
        avg_service_time_secs: 1.15
     
